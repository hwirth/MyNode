/*** spielwiese.css ***/

:root {
	Xscroll-behavior: smooth;   /* Firefox: Does not scroll properly on Shift+Enter */
	color-scheme:light dark; /* both supported */
}

.fancy.terminal {
	--terminal-margin    : 10px;
	--output-margin-top  : 1rem;
	--output-margin-x    : 0;
	--toolbar-gap        : 3px;
	--toolbar-bg         : #444455e0;
	--toolbar-outline    : solid 1px #fff3;
	--menu-gap           : 5px;
	--top-menu-radius    : 0 0 var(--input-radius) var(--input-radius);
	--bottom-menu-radius : var(--input-radius) var(--input-radius) 0 0;
	--toggle_state-gap   : 0.5rem;
	--user-radius        : 0px;
	--input-border       : solid 1px #000;
	--input-radius       : 1rem;
	--input-padding-x    : 0.8rem;
	--button-bg          : #08f1;
	--button-enabled-bg  : #88ff0018;
	--button-special-bg  : #ff000018;
	--button-enter-bg    : var(--button-special-bg);
	--button-close-bg    : var(--button-special-bg);

	--top-menu-radius    : var(--input-radius);
	--bottom-menu-radius : var(--input-radius);
}

@media (prefers-color-scheme: light) {
	html.light,
	:not(.fancy).terminal {
		--a-color   : #058;
		--a-visited : #648;
		--a-active  : #08f;
		--a-focus   : #08f;
		--a-hover   : #08c;

		--terminal-bg : #fffe;
		--toolbar-bg  : #8888;

		--input-color : #f00;
		--input-bg    : #fff;

		--stripes-color0 : #eaf0e8;
		--stripes-color1 : var(--terminal-bg);

		--offline-color       : #860;
		--offline-bg          : #850;
		--online-color        : #0af;
		--online-color-0      : #03b;
		--online-color-f      : #0af;
		--online-bg           : #06a;
		--authenticated-color : #fff;

		--transmit-color : #4af;
		--transmit-bg    : #5cf;

		--button-color : #eee;
		--button-bg    : #666;

		--button-enabled-color : #fc0;
		--button-enabled-bg    : #482;
		--button-special-bg    : #565;

		--button-enter-color : var(--button-special-color);
		--button-enter-bg    : var(--button-special-bg);
		--button-close-color : var(--button-special-color);
		--button-close-bg    : var(--button-special-bg);

		--output-margin-y    : 0;
		--output-margin-x    : 0.25em;

		--caret-color    : #f00;

		--toggle-state-off : #36a;
		--toggle-state-on  : #48f;

		--chat-color : #478;
		--cep-color  : #555;
		--mcp-color  : #f00;

		--warning-color : #c80;
		--error-color   : #e20;
		--success-color : #0a0;

		--code-color    : #fcb;
		--success-color : #060;
		--warning-color : #fc0;
		--error-color   : #f00;
		--true-color    : var(--true-color);
		--false-color   : var(--error-color);
		--null-color    : #28a;

		--hover-color     : #000;
		--debug-color     : #568;
		--text-color      : #210;
		--request-color   : #a60;
		--response-color  : #348;
		--string-color    : #162;
		--notice-color    : #568;
		--broadcast-color : #86c;
		--update-color    : #040;

		--separator-color  : #a60;
		--separator-border : dashed 1px var(--separator-color);
	}
	:not(.fancy).terminal output pre { Xfilter:invert(100%) saturate(1.5) brightness(0.6); }
}

.terminal {
	--tab-size       : 4;
	--input-tab-size : 8; X:var(--tab-size);

	--line-height : 1.2rem;

	--a-color   : #0af;
	--a-visited : #b8f;
	--a-active  : #0ff;
	--a-focus   : #fff;
	--a-hover   : #0ff;

	--focus-border : solid 1px #0f8;
	--focus-bg     : #fff4;

	--terminal-height    : calc(100vh - 2 * (var(--terminal-margin) + var(--toolbar-height)));
	--terminal-height    : calc(100vh - 2 * (var(--terminal-margin) ));
	--terminal-margin    : 0;
	--terminal-padding   : 0;X:var(--menu-gap);
	--terminal-bg        : #000c;

	--toolbar-bg : #333;
	--toolbar-height     : 2rem;
	--toolbar-gap        : 2px;
	--toolbar-outline    : none;

	--menu-offset        : 0px;
	--menu-gap           : 2px;
	--menu-border-radius : 5px;
	--menu-enter-width : 21em;

	--user-radius      : 3px;

	--items-gap      : 2px;
	--item-min-width : 8em;

	--output-margin-x    : var(--menu-gap);
	--output-padding-top : var(--menu-gap);
	--output-padding-x   : var(--menu-gap);
	--stripes-color0     : #131412;
	--stripes-color1     : var(--terminal-bg);

	--input-color        : #fc0;
	--input-bg           : #000f;
	--input-border       : solid 1px transparent;
	--input-border-width : 1px;
	--input-radius       : 0;
	--input-padding-x    : calc(var(--toolbar-height) / 3.5);
	--input-padding-y    : 0px;

	--button-color          : #fed;
	--button-bg             : #08f2;
	--button-padding        : 5px 10px;

	--button-enabled-color  : #af4;
	--button-enabled-bg     : #88ff0040;
	--button-special-bg     : var(--button-bg);X:#402838;

	--button-enter-color    : var(--button-special-color);
	--button-enter-bg       : var(--button-special-bg);
	--button-close-color    : var(--button-special-color);
	--button-close-bg       : var(--button-special-bg);

	--textarea-color : var(--text-color);
	--caret-color    : #ff0;

	--toggle_state-gap : 1rem;
	--toggle-state-off : #78a;
	--toggle-state-on  : #bdf;

	--chat-color      : #8df;
	--cep-color       : #abc;
	--mcp-color       : #f00;

	--warning-color   : #fc0;
	--error-color     : #e20;
	--success-color   : #0f0;

	--hover-color     : #fff;
	--debug-color     : #acf;
	--text-color      : #fed;
	--request-color   : #ca0;
	--response-color  : #78f;
	--string-color    : #5c6;
	--notice-color    : #acf;
	--broadcast-color : #86f;
	--update-color    : #090;

	--offline-color       : #fc08;
	--offline-bg          : #fa02;
	--online-color        : #0af;
	--online-color-0      : #0afc;
	--online-color-f      : #0aff;
	--online-bg           : #08f6;
	--authenticated-color : #fff;
	--authenticated-bg    : var(--online-bg);

	--transmit-color   : #4af;
	--transmit-bg      : #4af5;

	--speaker      : 'ðŸ—£';
	--one-person  : 'ðŸ‘¤';
	--two-persons : 'ðŸ‘¥';

	--self-content : var(--one-person);
	--self-color   : #fff;

	--separator-color    : #a60;
	--separator-border   : dashed 1px var(--separator-color);

	/* See DebugConsole.setFont() */
	--font-family : var(--font0);
	--font-size   : 1rem;
	--font4 : WhiteRabbit;
	--font0 : ModeSeven;
	--font1 : Terminus;
	--font2 : DIGIT;
	--font3 : monospace;

	--string-font-family: WhiteRabbit;  /*//...*/
}
.terminal.font0 { --font-family : var(--font0); }
.terminal.font1 { --font-family : var(--font1); }
.terminal.font2 { --font-family : var(--font2); }
.terminal.font3 { --font-family : var(--font3); }
.terminal.font4 { --font-family : var(--font4); }

@font-face {
	font-family: 'Terminus';
	src: url('/fonts/TerminusTTF.woff')  format('woff');
	src: url('/fonts/TerminusTTF.woff2') format('woff2');
	font-weight: normal;
	font-style: normal;
}
@font-face {
	font-family: 'WhiteRabbit';
	src: url('/fonts/WhiteRabbit.woff')  format('woff');
	src: url('/fonts/WhiteRabbit.woff2') format('woff2');
	font-weight: normal;
	font-style: normal;
}
@font-face {
	font-family: 'ModeSeven';
	src: url('/fonts/ModeSeven.woff')  format('woff');
	src: url('/fonts/ModeSeven.woff2') format('woff2');
	font-weight: normal;
	font-style: normal;
}
@font-face {
	font-family: 'DIGIT';
	src: url('/fonts/DIGIT.woff')  format('woff');
	src: url('/fonts/DIGIT.woff2') format('woff2');
	font-weight: normal;
	font-style: normal;
}


/* MAIN LAYOUT */

/* Required for the bit to fade into the distance on terminal toggle */
NotInUse.terminal { opacity:0; transition:all 0.5s linear; display:grid !important; }
NotInUse.terminal.enabled { opacity:1; }

/* TERMINAL */
.terminal.enabled { display:grid; }
.terminal {
	position:absolute; top:0; left:0; z-index:999; transform:unset;
	display:none; grid-template-rows:min-content auto min-content; grid-template-areas:"r0" "r1" "r2";
	grid-gap:var(--terminal-padding);
	width:100%; height:100%; Xoverflow:hidden;
	padding:var(--terminal-margin); font-size:var(--font-size); background:var(--terminal-bg);
	--scrollbar-thumb-color:#08f4; --scrollbar-track-color:#0660;
	scrollbar-color:var(--scrollbar-thumb-color) var(--scrollbar-track-color);
}
.terminal ::-webkit-scrollbar { opacity:1; width:9px; height:9px; }
.terminal ::-webkit-scrollbar-thumb { background:var(--scrollbar-thumb-color); }
.terminal ::-webkit-scrollbar-track { background:var(--scrollbar-track-color); }
.terminal header { grid-area:r0; position:relative; }
.terminal main   { grid-area:r1; position:relative; width:100%; max-height:100%; overflow:hidden; }
.terminal footer { grid-area:r2; }
.terminal .shell { display:grid; grid-template-areas:"m0" "m1"; grid-template-rows:auto 1fr; }
.terminal .shell output   { grid-area:m0; }
.terminal .shell textarea { grid-area:m1; }
.terminal ::selection {
	color:#fff;
	background:#06c8;
}
.terminal * {
	font-family:var(--font-family); font-size:var(--font-size); line-height:var(--line-height);
	tab-size:var(--tab-size);
}

/* TOOLBARS */
.terminal.fancy .toolbar {
	box-shadow:
		inset 0 0 0 1px #fff2,
		inset 0 0 5px 0 #000
	;
}
.terminal .toolbar {
	position:relative;
	display:flex; gap:var(--menu-gap);
	Xheight:var(--toolbar-height);
	outline:var(--toolbar-outline);
	border-radius:var(--input-radius);
	background:var(--toolbar-bg); color:#fff;
	box-shadow:var(--menu-box-shadow);
}

/* MENU */
.terminal .items { --sub-offset-x:0px; }
.terminal .node       .items { width:8em; } /* Top left, showing Node name */
.terminal .clear      .items { width:6em; } /* Clear button menu */
.terminal .connection .items { width:17em; }
.terminal .auth       .items { width:var(--menu-enter-width); }
X.terminal .main       .items { X:width:calc(var(--menu-enter-width) - 2em); --sub-offset-x:2em; }
.terminal .main       .items { width:calc(--menu-enter-width); }
.terminal .toggles    .items { width:calc(var(--menu-enter-width) - 4em); --sub-offset-x:2em; }
.terminal .filter     .items { width:17em; }
.terminal .toggles    .items button { flex-basis:40%; }

.terminal .toolbar nav {
	display:flex; Xjustify-content:center; flex-wrap:wrap-reverse; gap:var(--toolbar-gap);
}
.terminal footer.toolbar nav { flex-wrap:wrap; }
.terminal .toolbar nav > .items { display:none; }

.terminal:not(.connected) .send .items,
.terminal:not(.connected) .main_menu .items,
/*//... what else not to show?*/

.terminal .toolbar nav:is(:hover,:focus,:focus-within) > .items {
	--r:var(--input-radius);
	display:flex; flex-wrap:wrap; align-items:center; justify-content:center;
	gap:var(--menu-gap);
	position:absolute; top:100%;X:calc(100% + var(--menu-offset)); right:var(--sub-offset-x); z-index:999;
	box-sizing:content-box;
	border-radius:var(--top-menu-radius);
	padding:var(--menu-gap);
	background:var(--toolbar-bg);
}
.fancy.terminal {
	box-shadow:
		inset 0 1px 0 0 #fff2,
		      0 2px 0 0 #0004
	;
}
.terminal .toolbar > nav:first-child form nav,
.terminal .toolbar > nav:first-child .items {
	left:0; right:unset;
}
X.terminal .toolbar > nav:first-child .items { left:var(--sub-offset-x); right:unset; }

.terminal footer.toolbar > nav:is(:hover,:focus,:focus-within) .items {
	top:unset; bottom:100%; X:calc(100% + var(--menu-offset));
	border-radius:var(--bottom-menu-radius);
}
.terminal .toolbar nav:is(:hover,:focus,:focus-within) .items { box-shadow:inset 0 0 0 1px #fff0; }
.terminal .toolbar > nav:is(:hover,:focus,:focus-within) nav .items { color:#80fc; padding-bottom:0; }
.terminal .toolbar > nav:is(:hover,:focus,:focus-within) nav .items .close { color:var(--button-color); }

/* SUB MENU */
.terminal .toolbar > nav .items > * { flex-grow:1; min-width:3em; }
.terminal .toolbar > nav nav {
	--g:var(--menu-gap);
	padding:var(--g); margin:calc(-1 * var(--g));
}
.terminal .toolbar nav nav:hover  { z-index:199; }
.terminal .toolbar nav nav > button  { width:100%; } /* 3 buttons, each fill their "cell"?? somehow with this */
X.terminal .toolbar nav nav > .commands + .items button { Xflex-basis:6rem; ; min-width:5em; }

/* OUTPUT */
.terminal output {
	margin:var(--output-margin-top) var(--output-margin-x) 0;
	padding:var(--output-padding-top) var(--output-padding-x) 0;
	color:var(--text-color);
	white-space:pre-wrap;
	overflow-y:scroll;
	Xscroll-behavior: smooth;   /* Firefox: Does not scroll properly on Shift+Enter */
}
.terminal.fancy output {
	margin:1em 0;
}
/* Striped background */
.terminal:not(.fancy) output.stripes {
	--s:calc(2 * var(--line-height));
	--b0:var(--stripes-color0);
	--b1:var(--stripes-color1);
	background-image:linear-gradient( var(--b0), var(--b0) 50%, var(--b1) 51%, var(--b1) 100% );
	background-position:0 var(--output-padding-top);
	background-repeat:repeat;
	background-size:var(--s) var(--s);
	background-attachment:local;
}

/* INPUTS */
.terminal textarea {
	width:100%; border:none;
	background:transparent; color:var(--textarea-color);
	margin:calc(var(--output-padding-x) + var(--output-margin-x));
	resize:none;
	caret-shape:block;
	Xcaret-shape:bar;
	Xcaret-shape:unserscore;
	caret-color:var(--caret-color);
}
X.terminal textarea:focus { caret-color:#f0f; }
.terminal textarea.request { color:var(--request-color); }
.terminal textarea.cep     { color:var(--request-color); }
.terminal textarea.local   { color:var(--request-color); }
.terminal textarea.local ::first-letter { color:#fff; }

/* BUTTONS */
.terminal.fancy :is(input, button, span, code, ::before, ::after, textarea, output pre, a, b) {
	text-shadow:
		1px  0 #0004,
		-1px 0 #0004,
		0 1px  #0004,
		0 -1px #0004,

		2px  0 #0008,
		-2px 0 #0008,
		0 2px  #0008,
		0 -2px #0008
	;
}

/* FORM INPUT */
.terminal input {
	height        : var(--toolbar-height);
	border        : var(--input-border  );
	border-radius : var(--input-radius  );
	padding       : var(--input-padding-y) var(--input-padding-x);
	background    : var(--input-bg      );
	color         : var(--input-color   );
}
.terminal input:focus {
	outline:none;
	border:var(--focus-border);
}
.terminal button {
	border        : var(--input-border  );
	border-radius : var(--input-radius  );
	padding       : var(--button-padding);
	background    : var(--button-bg     );
	color         : var(--button-color  );
	white-space:nowrap;
}
.fancy.terminal button {
	box-shadow:
		inset -0px -0px 0px 1px #0006,
		inset  1px  1px 0px 1px #fff2
	;
}
.terminal input:hover,
.terminal button:focus,
.terminal button:hover {
	border:var(--focus-border); filter:brightness(1.5);
}

.terminal button.blink.success { color:var(--success-color); }
.terminal button.blink { animation: TOGGLE 0.2s linear 1; }
@keyframes TOGGLE {
	 0% { filter:brightness(2) contrast(1); }
	11% { filter:brightness(1) contrast(2); }
	22% { filter:brightness(2) contrast(1); }
	33% { filter:brightness(1) contrast(2); }
	44% { filter:brightness(2) contrast(1); }
	55% { filter:brightness(1) contrast(2); }
	66% { filter:brightness(2) contrast(1); }
}

/* SPECIAL COLOR */
.terminal button.ssnStat,
.terminal button.clear,
.terminal button.help,
.terminal button.bit,
.terminal button.token,
.terminal button.login,
.terminal button.logout,
.terminal button.connect,
.terminal button.disconnect {
	background:var(--button-special-bg);
}
.terminal button.debug:not(.enabled),
.terminal button.enter   { background:var(--button-enter-bg  ); color:var(--button-enter-color  ); }
.terminal button.close   { background:var(--button-close-bg  ); color:var(--button-close-color  ); }

.terminal .toolbar button.enabled { background:var(--button-enabled-bg); color:var(--button-enabled-color); }

.terminal .toolbar button.transmit,
.terminal .toolbar button.ping { background:var(--transmit-bg); }
.terminal.fancy nav .connection::before {
	content:''; display:none;
}
.terminal.fancy button.transmit::before,
.terminal.fancy button.ping::before {
	display:block;
	position:absolute; bottom:100%; left:10px; z-index:-1;
	width:20px; height:0;
	background:linear-gradient(to right, #0ff0, #0ff2 40%, #ffff 49%, #ffff 51%, #0ff2 60%, #0ff0 100%);
	height:var(--terminal-height);
}


/* TOOLBAR GADGETS */

.terminal .toolbar > nav:not(.who) > button { height: 100%; }

/* LIST */
.terminal .list { display:flex; align-items:center; }
.terminal .list button:last-child { margin-right:0; }
/* Self */
.terminal .list button.self { display:none; }
.terminal .list button.self { display:block; color:var(--self-color); }
.terminal .list button.self::before {
	content:var(--self-content);
	font-size:0.8em;
	padding-right:0.35em;
	text-shadow:
		1px  0 #fff8,
		-1px 0 #fff8,
		0 1px  #fff8,
		0 -1px #fff8
	;
}

/* Who */
Xs.terminal.fancy .list.who::before {
	content:'âŸ·';
	color:#023;
	font-weight:bold;
	filter:drop-shadow(0 0 2px #cef);
}
.terminal .toolbar .who { flex-direction:row-reverse; flex-grow:1; }
.fancy.terminal .toolbar .who button { border-radius:var(--user-radius); }
.fancy.terminal .toolbar .who button.room { border-radius:0 var(--input-radius) var(--input-radius) 0; }
.fancy.terminal .toolbar .who button:last-child { border-radius:var(--input-radius) 0 0 var(--input-radius); }

/* Toggle state */
.terminal .list.toggle_state { padding:0 var(--toggle_state-gap); color:var(--toggle-state-off); cursor:pointer; }
.terminal .list b { color:var(--toggle-state-on); font-weight:normal; }

/* Connection */
.terminal .node       > button,
.terminal .connection > button,
.terminal .connection.warning {
	background:var(--offline-bg); color:var(--offline-color);
	transition:color 0.2s linear;
}
.terminal.connected .node       > button,
.terminal.connected .connection > button,
.terminal.connected .connection.warning {
	background:var(--online-bg); color:var(--online-color);
}
.terminal.authenticated .node       > button,
.terminal.authenticated .connection > button,
.terminal.authenticated .connection button.warning {
	color:var(--authenticated-color);
}
.terminal.fancy.connected .connection > button,
.terminal.fancy.connected .node > button {
	box-shadow:0 0 10px 0 var(--online-color);
}
.terminal.fancy.connected .node       > button,
.terminal.fancy.connected .connection > button,
.terminal.fancy.connected .connection.warning {
	border:solid 1px var(--online-color);
}

/*Status */
.terminal .status {
	flex-grow:1;
	position:relative; padding-left:var(--menu-gap); cursor:pointer; align-self:center;
	overflow:hidden; text-overflow:ellipsis; Xwhite-space:nowrap;
}
X.terminal .status > span > a,
X.terminal .status > span,
X.terminal .status * { font-family:serif; }
.terminal .status .extra { z-index:1; }

.terminal .status a { text-decoration:none; }
.terminal .status a:hover { color:var(--a-hover); text-decoration:underline; }

/* Time */
.terminal .time { transition:opacity 0.25s linear; opacity:1; }
.terminal .time.fade_out { opacity:0; }
.terminal .time {
	Xfont-variant-numeric: normal;
	Xfont-variant-numeric: ordinal;
	Xfont-variant-numeric: slashed-zero;
	Xfont-variant-numeric: lining-nums; /* <numeric-figure-values> */
	Xfont-variant-numeric: oldstyle-nums; /* <numeric-figure-values> */
	Xfont-variant-numeric: proportional-nums; /* <numeric-spacing-values> */
	Xfont-variant-numeric: tabular-nums; /* <numeric-spacing-values> */
	Xfont-variant-numeric: diagonal-fractions; /* <numeric-fraction-values> */
	Xfont-variant-numeric: stacked-fractions; /* <numeric-fraction-values> */
	Xfont-variant-numeric: oldstyle-nums stacked-fractions;
	position:absolute;
	opacity:1; transition:opacity 1s linear;
}
.terminal .time.fade_out {
	opacity:0;
}

/* OUTPUT TEXT */

.terminal a         { color:var(--a-color   ); text-decoration:underline; }
.terminal a:visited { color:var(--a-visited ); }
.terminal a:active  { color:var(--a-active  ); }
.terminal a:focus   { color:var(--a-focus   ); }
.terminal a:hover   { color:var(--a-hover   ); }

/* PRE */
.terminal pre.cep       { color:var(--cep-color);       }
.terminal pre.debug     { color:var(--debug-color);     }
.terminal pre.string    { color:var(--string-color);    font-family:var(--string-font-family); }
.terminal pre.notice    { color:var(--notice-color);    }
.terminal pre.broadcast { color:var(--broadcast-color); }
.terminal pre.update    { color:var(--update-color);    }
.terminal pre.request   { color:var(--request-color);   }
.terminal pre.response  { color:var(--response-color);  }
.terminal pre.chat      { color:var(--chat-color);      }
.terminal pre.error     { color:var(--error-color);     }

.terminal pre { display:block; }
.terminal .debug .cep       pre.cep,
.terminal .debug .string    pre.string,
.terminal .debug .notice    pre.notice,
.terminal .debug .broadcast pre.broadcast,
.terminal .debug .update    pre.update,
.terminal .debug .request   pre.request,
.terminal .debug .response  pre.response { display:none; }


/* EXPAND */
.terminal pre { position:relative; z-index:10; Xwhite-space:pre-wrap; }
.terminal .separators pre { margin:0 0 var(--line-height); }
.terminal.fancy .separators pre { margin:0 0 calc(0.25 * var(--line-height)); }
.terminal output pre:hover { color:var(--hover-color); cursor:pointer; }

.terminal .compact.overflow.last pre:last-child,
.terminal :not(.compact).overflow pre.unexpand,
.terminal .compact.overflow pre {
	height:var(--line-height); overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
}

.terminal output.compact pre.unexpand:last-child,
.terminal :not(.compact) pre.unexpand,
.terminal .compact pre {
	white-space:normal;
}

/* LAST */
.terminal output[class]:not(.compact) pre.unexpand { margin-bottom:var(--line-height); }

.terminal:not(.debug) output.compact.last pre:last-child,/*//...*/
.terminal output.compact pre.expand {
	white-space:pre-wrap; height:unset; overflow:unset;
}

/* MARKER */
.terminal output:not(.overflow) pre.mark { margin-bottom:-0.7em; }
.terminal pre.mark { position:relative; display:block; overflow:hidden; }
.terminal pre.mark::after {
	content:'';
	display:block; position:relative; overflow:hidden;
	transform:translate(-35.5px, 7px);
	width:calc(100% + 35px);
	height:var(--line-height);
	transform:translate(-35.5px, 7px);
	margin-right:-50px;
	outline:none;
	border:solid 1px #09f8; border-width:1px 0 0;
	margin-bottom:6.5px;
	color:transparent;
}

/* iframe */
.terminal .expand iframe { display:none; }
.terminal iframe {
	--p:5px; --c:#48f8;
	box-sizing:content-box;
	position:relative; Xz-index:-1;
	width:calc(100% - 3 * var(--p) - 10px);
	max-height:calc(100vh - 6em - calc(2 * calc(1.2em + 2px + 10px + 10px)));
	margin:calc(-1em + 2px) 0 1em 1px;
	outline:solid 1px var(--c);
	border:solid 10px #08f1; border-width:0.8em 3px; border-radius:0 5px 5px 5px; overflow:hidden;
	box-shadow:inset 0 0 0 1px var(--c);
	padding:1px;
	Xpadding:var(--p) 6px;
	Xbackground:#000a;   /* Turns command dark */
}


/* FANCY TERMINAL */

.terminal.fancy {
	background:unset;
	background-image:url(/images/bg_grid3.jpg);   /******************************************************* GRID **/
	background-size:cover;
	background-size:auto 100%;
	background-position:center;
	Xtransition:background-image 0.5s ease-in-out;
}
.terminal.fancy.connected { opacity:1; }
@media (min-aspect-ratio: 4/3) {
    .terminal.fancy {
        background-size: 100% 100%;
    }
}
.terminal.fancy::after {
	content: ''; position:absolute; top:0; left:0; width:100%; height:100%; Xz-index:1;
	background-color:#2220;
	background-image:url(/images/beam.png);   /*********************************************************** BEAM **/
	background-position:6px center;
	background-repeat:no-repeat;
	background-size:calc(96px / 2) var(--terminal-height);
	filter:hue-rotate(200deg) brightness(0.75) contrast(1.5);
}
.terminal.fancy.connected::after {
	filter:hue-rotate(0deg) brightness(1) contrast(1);
}

.terminal.enabled.fancy.bit output::before {
	transform:translate(-50%,-50%) scale(1);
}
.terminal.fancy output::before {
	--b:0.85;
	content:'';
	position:absolute; top:50%; left:50%; Xz-index:-2; transform:translate(-50%,-50%) scale(0.00001);
	width:130px; height:125px;
	background-image:url(/images/bit_transparent.gif);   /************************************************* BIT **/
	filter:hue-rotate(180deg) brightness(var(--b));
	transition:transform 0.3s linear;
}
.terminal.fancy > * { z-index:3; }
.terminal.fancy.connected  output::before { filter:hue-rotate(  0deg) brightness(var(--b));        }
.terminal.fancy.bit.yes    output::before { filter:hue-rotate(-90deg) brightness(0.9) contrast(2); }
.terminal.fancy.bit.no     output::before { filter:hue-rotate(140deg) brightness(0.8) contrast(3); }

.terminal.fancy.bit.yes    output::after,
.terminal.fancy.bit.no     output::after {
	content:'';
	position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); z-index:-1;
	width:200%; height:200%;
	border-radius:100%;
	background:transparent;
}


/* FANCY PRE */

.terminal.fancy :is(textarea, pre) { padding-left:50px; }
/* Beam DOTS */
.terminal.fancy pre::before {
	content:'';
	position:absolute; left:calc(var(--terminal-margin) - 5px); top:1px;
	width:20px; height:12px;
	outline:solid 1px #fff2; border-radius:100%;
	background:radial-gradient(ellipse at center, #fffc, #fff8 1px, #fff1 5px, #fff0 6px);
}
.terminal.fancy.animate	 pre.expand::before {
	animation: MARKER_GLOW 3s ease-in-out infinite;
}
@keyframes MARKER_GLOW {
	    0% { opacity:1.0; }
	   50% { opacity:0.6; }
	  100% { opacity:1.0; }
}
.terminal.fancy pre.expand::before {
	outline-color:#fff6; border-radius:100%;
	background:radial-gradient(ellipse at center, #ffff, #fffa 3px, #fff1 10px, #fff0 20px);
}

.terminal.fancy pre.chat::before {
	content:'Msg'; line-height:10px; font-size:0.7em; text-align:center;
	outline:none; border-radius:3px; background:#0003;
}
.terminal.fancy .debug pre.chat::before { color:#0af; }
.terminal.fancy pre.chat.unexpand::before { background:#fff6; }

.terminal code      { color:var(--code-color   ); }
.terminal .success  { color:var(--success-color); }
.terminal .warning  { color:var(--warning-color); }
.terminal .error    { color:var(--error-color  ); }
.terminal .true     { color:var(--true-color   ); }
.terminal .false    { color:var(--false-color  ); }
.terminal .null     { color:var(--null-color   ); }/*
.terminal code.period   { color:#ccc; }
.terminal code.colon    { color:#ccc; }
.terminal code.semi     { color:#ccc; }
.terminal code.slash    { color:#ccc; }
.terminal code.curlyO   { color:#fff; }
.terminal code.bracketO { color:#eee; }
.terminal code.parensO  { color:#ccc; }
.terminal code.parensC  { color:#ddd; }
.terminal code.bracketC { color:#ccc; }
.terminal code.curlyC   { color:#bbb; }
*/


/* ANIMATIONS */

/* Online Status */
.terminal.animate.fancy.connected .connection > button,
.terminal.animate.fancy.connected .node > button {
	animation: CONNECTION 2s ease-in-out infinite alternate;
}
@keyframes CONNECTION {
	  0% { filter:brightness( 1.0 ); box-shadow:0 0 15px 0 var(--online-color-0); }
	100% { filter:brightness( 1.1 ); box-shadow:0 0 15px 0 var(--online-color-f); }
}

/* Beams */
:not(.init).animate body::after,
.terminal.fancy.animate::after {
	animation: BEAM 0.1s ease-in-out infinite;
}
@keyframes BEAM {
	  0% { opacity:1.0;  }
	 49% { opacity:1.0;  }
	 50% { opacity:0.95; }
	 99% { opacity:0.95; }
	100% { opacity:1.0;  }
}

/* Transmission */
X.terminal.fancy .toolbar button.transmit::before,
X.terminal.fancy .toolbar button.ping::before {
	animation:TRANSMISSION 0.4s linear;
	opacity:0;
}
@keyframes TRANSMISSION {
	  0% { opacity:0;   }
	  1% { opacity:1;   }
	 30% { opacity:1;   }
	 31% { opacity:0.6; }
	 50% { opacity:0.9; }
	 68% { opacity:0.6; }
	 69% { opacity:1;   }
	 99% { opacity:1;   }
	100% { opacity:0;   }
}

/* MCP */
X:not(.init) .animate.enabled.terminal::before {
	content: ''; position:absolute; top:0; left:0; width:100%; height:100%; z-index:-2;
	background-image: url(/images/mcp.jpg);
	background-size: cover;
	background-size: auto 100%;
	background-repeat: no-repeat;
	background-position: center;
	filter:contrast(1.5) brightness(0.5);
	animation: MCP_MOVE 30s linear infinite;
}
@keyframes MCP_MOVE {
	 00% { transform:scale(1.00) rotate( 0deg) }
	 11% { transform:scale(1.03) rotate( 1deg) }
	 22% { transform:scale(1.10) rotate( 0deg) }
	 33% { transform:scale(1.25) rotate(-2deg) }
	 50% { transform:scale(1.50) rotate( 0deg) }
	 66% { transform:scale(1.25) rotate( 2deg) }
	 77% { transform:scale(1.10) rotate( 0deg) }
	 88% { transform:scale(1.03) rotate(-1deg) }
	100% { transform:scale(1.00) rotate( 0deg) }
}

/* Background */
X:not(.init) .animate.enabled.terminal::after {
	animation: MCP_GLOW 360s linear infinite; /*grid3*/
}
@keyframes MCP_GLOW {
	  0% { opacity:1.0; }

	 25% { opacity:1.0; }
	 26% { opacity:0.85; }
	 43% { opacity:0.75; }
	 45% { opacity:1.0; }

	 50% { opacity:1.0; }
	 50.4% { opacity:0.0; }
	 52% { opacity:0.7; }
	 58% { opacity:1.0; }

	100% { opacity:1.0; }
}

/* Bit */
X:not(.init) .animate.enabled.terminal output::before {
	animation: BIT_GLOW 360s linear infinite; /*bit.gif*/
}
@keyframes BIT_GLOW {
	 00% { opacity:1; }

	 23% { opacity:1; }
	 24% { opacity:0; }
	 45% { opacity:0; }
	 46% { opacity:1; }

	 48% { opacity:1; }
	 49% { opacity:0; }
	 59% { opacity:0; }
	 60% { opacity:1; }

	100% { opacity:1; }
}


/*EOF*/
